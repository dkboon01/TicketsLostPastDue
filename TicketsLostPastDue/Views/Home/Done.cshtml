@model TicketsLostPastDue.Models.ViewModelTicketDetail

@{
    ViewBag.Title = "Process Past Due as Done";
}
<head>		ViewModelTicketDetail	error CS0103: The name 'ViewModelTicketDetail' does not exist in the current context

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    @*<link href="~/Content/themes/base/accordion.css" rel="stylesheet" />*@
    @*<link rel="stylesheet" href="/resources/demos/style.css">*@
    @*<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>*@
    <script>
        //$(function () {
        //    $("#accordion").accordion({
        //        collapsible: true
        //    });
            
        //});
    </script>
</head>
<h2>@ViewBag.Title</h2>
<h3>@ViewBag.Message</h3>
<style type="text/css">
    .inspectdtl {
        -moz-box-shadow: 0 0 2px black;
        -webkit-box-shadow: 0 0 2px black;
    }
</style>

<div class="container">


    @using (Html.BeginForm("Done", "Home", FormMethod.Post, new { ticketmodel = Model }))

    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true)
        <div>
            @Html.Partial("TicketDetailWithInspection")
            <div class="invoicedtl">

                @*<input id="allcheckbox" type="checkbox" name="inspect" value="All" />*@
                @*<p><b>Invoices for this site past year </b></p>*@
                @*<button type="button" id="accordion" class="accordion ui-accordion"><strong>Invoices </strong></button>*@
                <label>Past Year Invoice</label>
                <div id="accordion"  class="panel">
                    @*<h3> bel</h3>
                    <div> hello</div>
                    <h3>force</h3>
                    <div>hello</div>*@
                     
                    @{
                        if (Model.hdrinv != null)
                        {
                            foreach (var t in Model.hdrinv)
                            {
  
                                  <h3>
                                       @*<label class=" ui-accordion col-md-12 col-xs-12">*@
                                      <strong>@( " Invoice Date: " + @t.InvoiceDate  )   &nbsp; &nbsp;  @("    Dept: " + @t.ServCompany)  &nbsp; &nbsp;  @(" Invoice Desc: " + t.invdesc) &nbsp; &nbsp; @(" Tech name: " + @t.InvoiceNumber) &nbsp; &nbsp; @(" Invoice#: " + @t.InvoiceNumber) </strong>
                                      @*</label>*@
                                      @*<label class=" ui-accordion col-md-12 col-xs-12"for="invoicenumber">Invoice #:</label> @t.InvoiceNumber
                                      <label class=" ui-accordion col-md-12 col-xs-12">Tech Name:</label>  @t.Techname*@ 
                                  </h3>
                               

                                   <div>
                                         @*<label for="invoicenumber">Invoice #:</label> @t.InvoiceNumber
                                         <label>Tech Name:</label>  @t.Techname*@
                                         
                                              <table class="invtable col-md-12 col-xs-12">
                                                
                                                   <thead>
                                                         <tr>
                                                            <th>Part Description </th>
                                                             <th>Quantity </th>
                                                             <th>Unit Price</th>
                                                              <th>Ext Price</th>
                                                         </tr>
                                                   </thead>
                                                 
                                                  @foreach (var m in Model.invs)
                                                  {
                                                                  if (@m.invoicenumber == @t.InvoiceNumber)
                                                                  {
                                                                     <tr>
                                                                       <td>
                                                                            <div class="col-md-5 col-xs-5">
                                                                              @m.partdesc
                                                                             </div>
                                                                      </td>
                                                                       <td>

                                                                           <div class="col-md-2 col-xs-2">
                                                                           @m.quantity
                                                                            </div>
                                                                       </td>
                                                                         <td>

                                                                                <div class="col-md-2 col-xs-2">
                                                                               @String.Format("{0:C}", @m.UnitPrice)
                                                                               </div>
                                                                          </td>
                                                                          <td>

                                                                              <div class="col-md-3 col-xs-3">
                                                                                 @String.Format("{0:C}", @m.LineItemExtPrice)
                                                                              </div>
                                                                           </td>
                                                                   </tr>

                                                                  }
                                                  }


                                               </table>
                                             
                                   </div>
                       
                                  
                               
                            }
                        
                        }
                    }
                </div>



            </div>
           
            <div class="inspectdtl panel" style="margin-top: 50px">

                @*<input id="allcheckbox" type="checkbox" name="inspect" value="All" />*@
                <p><b>Mark the inspections you want to include in the process</b></p>
                <table id="InspectionDtl" class="inspect">
                    <thead>
                        <tr>
                            <th></th>
                            <th class="col-md-3 col-xs-3">Cycle</th>
                            <th class="col-md-3 col-xs-3">System</th>
                            <th class="col-md-3 col-xs-3">Next Inspection</th>
                            <th class="col-md-3 col-xs-3">Last Inspection</th>
                        </tr>
                    </thead>


                    @for (var i = 0; i < Model.sysinsp.Count(); i++)
                    {


                        <tr>
                            <td>
                                @Html.HiddenFor(m => m.sysinsp[i].inspectionid)
                                @Html.HiddenFor(m => m.sysinsp[i].syscode)
                                @Html.HiddenFor(m => m.sysinsp[i].nextinpdate)
                                @Html.HiddenFor(m => m.sysinsp[i].lastinpdate)
                                @Html.HiddenFor(m => m.sysinsp[i].customer_system_id)
                                @Html.HiddenFor(m => m.sysinsp[i].inspcycldesc)

                                @Html.CheckBoxFor(m => m.sysinsp[i].IsSelected)

                                @*@Html.EditorFor(m => m.sysinsp[i].inspectionid)*@
                                <input type="hidden" name="inspectionid" id="inspectionid" value="m.sysinsp[i].inspectionid" />

                            </td>
                            <td>
                                @Html.DisplayFor(m => m.sysinsp[i].inspcycldesc)
                            </td>
                            <td>
                                @Html.DisplayFor(m => m.sysinsp[i].syscode)

                            </td>
                            <td>
                                @Html.DisplayFor(m => m.sysinsp[i].nextinpdate)
                            </td>
                            <td>
                                @Html.DisplayFor(m => m.sysinsp[i].lastinpdate)
                            </td>
                        </tr>
                    }

                </table>

            </div>
           
            @*editfor here*@


            @Html.HiddenFor(model => model.apit.CustomerSystemId)
            @Html.HiddenFor(model => model.apit.InspectionId)
            @Html.HiddenFor(model => model.apit.ServiceTicketId)
            @Html.HiddenFor(model => model.apit.Site.SiteNumber)
            @Html.HiddenFor(model => model.apit.Customer.CustomerNumber)
            @Html.HiddenFor(model => model.apit.SystemCode)
            @Html.HiddenFor(model => model.tickinspectdesc)
            @Html.HiddenFor(model => model.apit.TicketNumber)

            @*   @Html.HiddenFor(model => model.apit.) *@




            @*<label>Select the competitor that we lost the inspection to:</label>*@
            @*@Html.DropDownListFor(m => m.Selectedcompetitor, new SelectList(Model.competitorslist, "Userdef_8_Code", "Userdef_8_Code", 0))*@

            @*@Html.HiddenFor(model => model.Selectedcompetitor)*@
            @*<label id="competitorothertxtlbl" name="competitorothertxtlbl" for="competitorothertxt"> Please provide the name of the person who physically turned you away when you stopped out? </label>
            <input id="competitorothertxt" type="text" maxlength="100" name="competitorothertxt" />*@
            <label id="lblticknote" name="ticknotelbl"  class = "col-md-12 col-xs-12" for="ticknote"> Add Notes to Ticket:</label>
            <textarea id="ticknote" style="max-width:80%" type="text"  class = "col-md-12 col-xs-12" rows="3" name="ticknote" required ></textarea>
            
            <div class="col-md-12 col-xs-12" style="margin-top:50px">
                <input type="submit" value="Inactivate Inspection" name="Done" />
                <input type="submit" value="Keep On Past Due" name="Done"/>
            </div>
        </div>
    }

</div>

    <script>
        $(document).ready(function () {
            $('#accordion').accordion({ collapsible: true, active: 'none' });
        });
        $(document).ready(function () {
         
          $('#Selectedcompetitor').change(function (e) {
          //    alert($('#Selectedcompetitor').val());
              if ($(this).val() === "Other") {
                  $('#competitorothertxt').css('display' , 'inline');
                  $('#competitorothertxtlbl').css('display', 'inline');
              }
              else {
                  $('#competitorothertxt').css('display', 'none');
                  $('#competitorothertxtlbl').css('display', 'none');
              }
          });
  //        $(function () {
         
   //       });
          //$(document).ready(function () {
          //    var acc = document.getElementsByClassName("accordion");
          //    var i;

          //    for (i = 0; i < acc.length; i++) {
          //        acc[i].onclick = function () {
          //            this.classList.toggle("active");
          //            this.nextElementSibling.classList.toggle("show");
          //        }

         
  
         

              

              //$(window).on("navigate", function (event, data) {
              //    var direction = data.state.direction;
              //    if (direction == 'back') {
              //        // do something
              //    }
              //    if (direction == 'forward') {
              //        // do something else
              //    }
              //});
          });
     
    </script>




